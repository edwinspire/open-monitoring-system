const dotenv = require("dotenv");
dotenv.config();

const { Pool } = require('pg')

const connectionString = process.env.DATABASE_URL;

const pool = new Pool({connectionString: connectionString,    
  // number of milliseconds a client must sit idle in the pool and not be checked out
  // before it is disconnected from the backend and discarded
  // default is 10000 (10 seconds) - set to 0 to disable auto-disconnection of idle clients
  idleTimeoutMillis: 10,
  // maximum number of clients the pool should contain
  // by default this is set to 10.
  max: 60, 
  ssl: {
  rejectUnauthorized: false
}})
//console.log('POSTGRES', process.env.DATABASE_URL);
module.exports = {
  query: (text, params) => pool.query(text, params),
}