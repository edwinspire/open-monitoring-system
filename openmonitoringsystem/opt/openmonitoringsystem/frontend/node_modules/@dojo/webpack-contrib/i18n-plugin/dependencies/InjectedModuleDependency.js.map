{"version":3,"file":"InjectedModuleDependency.js","sourceRoot":"","sources":["InjectedModuleDependency.ts"],"names":[],"mappings":";;AAAA,8EAA+E;AAC/E,sFAAuF;AAGvF;;GAEG;AACH,MAAqB,wBAAyB,SAAQ,gBAAgB;CAOrE;AAPD,2CAOC;AAED;;GAEG;AACH,wBAAwB,CAAC,QAAQ,GAAG;IACnC;;;;;OAKG;IACH,KAAK,CAAC,GAA6B,EAAE,MAAqB;QACzD,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM;YACzB,CAAC,CAAC,uBAAuB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI;YAC1D,CAAC,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAE5C,MAAM,MAAM,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAC5D,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,MAAM,GAAG,OAAO,IAAI,CAAC,CAAC;IAC3C,CAAC;CACD,CAAC","sourcesContent":["import ModuleDependency = require('webpack/lib/dependencies/ModuleDependency');\nimport webpackMissingModule = require('webpack/lib/dependencies/WebpackMissingModule');\nimport ReplaceSource = require('webpack-sources/lib/ReplaceSource');\n\n/**\n * A custom Webpack dependency used to inject an arbitrary `require` to the beginning of the target source.\n */\nexport default class InjectedModuleDependency extends ModuleDependency {\n\t/**\n\t * An optional string representing the variable name to which the require should be assigned. If no\n\t * variable is provided, then the module is not assigned to a variable and is assumed to contain\n\t * only side effects.\n\t */\n\tvariable?: string;\n}\n\n/**\n * A custom template for rendering injected `require`s to the beginning of the target source.\n */\nInjectedModuleDependency.Template = class {\n\t/**\n\t * Add the depedency's module to the source as a `require` call.\n\t *\n\t * @param dep The module dependency\n\t * @param source The source to be modified\n\t */\n\tapply(dep: InjectedModuleDependency, source: ReplaceSource) {\n\t\tconst content = dep.module\n\t\t\t? `__webpack_require__(${JSON.stringify(dep.module.id)});`\n\t\t\t: webpackMissingModule.module(dep.request);\n\n\t\tconst prefix = dep.variable ? `var ${dep.variable} = ` : '';\n\t\tsource.insert(0, `${prefix}${content}\\n`);\n\t}\n};\n"]}