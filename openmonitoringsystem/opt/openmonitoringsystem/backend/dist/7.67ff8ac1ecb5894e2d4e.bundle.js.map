{"version":3,"sources":["webpack://pen_onitoring_ystem/./src/widgets/login/Login.m.css","webpack://pen_onitoring_ystem/./src/widgets/login/Login.ts"],"names":["module","exports"," _key","root","body","wrapper","form-success","container","form","links_block","bg_bubbles","square","Login","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_2__","[object Object]","this","_openSnack","_MsgSnackBar","msg","console","log","invalidate","setTimeout","document","cookie","Object","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_1__","classes","_Login_m_css__WEBPACK_IMPORTED_MODULE_3__","action","method","onsubmit","e","target","inputs","getElementsByTagName","i","DataLogin","length","defineProperty","name","value","enumerable","res","fetch","JSON","stringify","headers","Content-Type","data","json","status","login","localStorage","setItem","idaccount","iduser","preferences","fullname","window","location","href","SnackBar","message","preventDefault","type","placeholder","required","_dojo_widgets_snackbar__WEBPACK_IMPORTED_MODULE_4__","open","leading","messageRenderer","tslib__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_decorators_watch__WEBPACK_IMPORTED_MODULE_5__"],"mappings":"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","file":"7.67ff8ac1ecb5894e2d4e.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"OpenMonitoringSystem/Login\",\"root\":\"Login-m__root__309e8d3B_u0\",\"body\":\"Login-m__body__309e8d39SBB\",\"wrapper\":\"Login-m__wrapper__309e8d20JBI\",\"form-success\":\"Login-m__form-success__309e8d1TYVx\",\"container\":\"Login-m__container__309e8daargL\",\"form\":\"Login-m__form__309e8d3_nB0\",\"links_block\":\"Login-m__links_block__309e8d173hP\",\"bg_bubbles\":\"Login-m__bg_bubbles__309e8d1X-H3\",\"square\":\"Login-m__square__309e8d3FwE5\"};","import { v, w } from '@dojo/framework/core/vdom';\nimport WidgetBase from '@dojo/framework/core/WidgetBase';\nimport * as css from './Login.m.css';\nimport SBar from '@dojo/widgets/snackbar';\nimport watch from '@dojo/framework/core/decorators/watch';\n\nexport default class Login extends WidgetBase  {\n\n\t@watch()\tprivate _openSnack = false;\n\t@watch()\tprivate _MsgSnackBar = '-';\n\t\n\tprivate SnackBar(msg: string){\n\t\tconsole.log('SnackBar '+msg)\n\t\tthis._openSnack = true;\n\t\tthis._MsgSnackBar = msg;\n\t\tthis.invalidate();\n\t\tsetTimeout(()=>{\n\t\t\tthis._openSnack = false;\n\t\t\tthis.invalidate();\n\t\t}, 4000)\t\t\n\t}\n\n\tonAttach(){\n\t\tdocument.cookie = \"TOKEN_USER= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n\t\tconsole.log('Borrar');\n\n\t}\n\n\tprotected render(){\n\n\t\treturn v('div', {classes: [css.root]}, [\n\t\t\tv('div', {classes: [css.body]}, [\n\t\t\t\tv('div', {classes: css.wrapper}, [\n\t\t\t\t\tv('div', { classes: [css.container]}, [\n\t\t\t\t\t\tv('h1', {}, ['Login']),\n\t\t\t\t\t\tv('form', {classes: css.form, action: \"/login\", method: \"post\",  onsubmit: (e: Event)=>{\t\n\t\t\t\t\t\t\tif(e.target){\n\t\t\t\t\t\t\t\tlet d = e.target as HTMLFormElement;\n\t\t\t\t\t\t\t\tlet inputs = d.getElementsByTagName(\"input\");\n\t\t\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\t\t\tvar DataLogin = {};\n\n\t\t\t\t\t\t\t\tfor (i=0; i<inputs.length; i++){\n\t\t\t\t\t\t\t\t\tObject.defineProperty(DataLogin, inputs[i].name, {value : inputs[i].value, enumerable: true});\n\t\t\t\t\t\t\t\t\tif(i+1 == inputs.length){\n\t\t\t\t\t\t\t\t\t\t(async()=>{\n\n\t\t\t\t\t\t\t\t\t\t\tlet res = await fetch(\"/login\",{method: 'POST', body: JSON.stringify(DataLogin), headers: {'Content-Type': 'application/json'}});\n\t\t\t\t\t\t\t\t\t\t\tvar data = await res.json();\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t\t\t\t\t\t\tif(res.status == 200){\n\n\t\t\t\t\t\t\t\t\t\t\t\tif(!data.login){\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.SnackBar(data.message)\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('idaccount', data.idaccount);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('iduser', data.iduser);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('preferences', data.preferences);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('fullname', data.fullname);\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('user', JSON.stringify(data));\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.location.href = \"/#home\";\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\tthis.SnackBar('Sucedió un inconveniente con el servidor')\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}, [\n\t\t\t\t\t\t//v('input', {classes: [css.input], name: 'account',  type: 'text', placeholder: 'Cuenta'}, []),\n\t\t\t\t\t\tv('input', {name: 'username', type: 'text', placeholder: 'Usuario', required: 'required'}, []),\n\t\t\t\t\t\tv('input', {name: 'pwd', type: 'password', placeholder: 'Contraseña', required: 'required'}, []),\n\t\t\t\t\t\tv('input', {type: 'submit', value: 'Aceptar'}),\n\t\t\t\t\t\tv('div', {classes: css.links_block}, [\n\t\t\t\t\t\t\tv('a', {href: \"/#register\"}, ['Registro'])\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t]),\n\t\t\t\t\tv('ul', {classes: css.bg_bubbles}, [\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li'),\n\t\t\t\t\t\tv('li')\n\t\t\t\t\t\t]),\n\t\t\t\t\tw(SBar, {open: this._openSnack, leading: false, type: 'error', messageRenderer: () => this._MsgSnackBar})\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t])\n\t}\n\n\n}"],"sourceRoot":""}